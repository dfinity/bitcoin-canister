type network = variant {
  mainnet;
  testnet;
  regtest;
};

type satoshi = nat64;

type address = text;

type init_payload = record {
  stability_threshold: nat;
  network: network;
  blocks_source: principal;
};

type get_balance_request = record {
  address : address;
  min_confirmations: opt nat32;
};

service bitcoin: (init_payload) -> {
  get_balance: (get_balance_request) -> (satoshi);
}
